# Отчет по лабораторной работе № 3
## по курсу "Объектно-оринетированное программирование"

Студент группы М8О-208Б-23 Федорова Екатерина Васильевна

Работа выполнена 

1. **Тема**: Наследование, полиморфизм
2. **Цель работы**:
- Изучение механизмов работы с наследованием в С++;
- Изучение механизма перегрузки операций.
3. **Задание (вариант №19)**: Разработать программу на языке C++ согласно варианту задания. Программа на C++ должна собираться с помощью системы сборки CMake. Программа должна получать данные из стандартного ввода (std::cin) и выводить данные в стандартный вывод (std::cout).
Необходимо реализовать функцию согласно варианту задания. Функция должна быть помещена в отдельный файл. Разработать классы согласно варианту задания, классы должны наследоваться от базового класса Figure. Фигуры являются фигурами вращения. Все классы должны поддерживать набор общих методов:
1. Вычисление геометрического центра фигуры вращения;
2. Вывод в стандартный поток вывода std::cout координат вершин фигуры через
перегрузку оператора << для std::ostream;
3. Чтение из стандартного потока данных фигур через перегрузку оператора >> для
std::istream
4. Вычисление площади фигуры через перегрузку оператора приведения к типу double;

Создать программу, которая позволяет:
- Вводить из стандартного ввода std::cin фигуры, согласно варианту задания.
- Сохранять созданные фигуры в массив (по аналогии с предыдущей лабораторной
работой Array) указатели на фигуру (Figure*)
- Фигуры должны иметь переопределенные операции копирования (=), перемещения (=) и
сравнения (==)
- Вызывать для всего массива общие функции (1-3 см. выше).Т.е. распечатывать для
каждой фигуры в массиве геометрический центр и площадь.
- Необходимо уметь вычислять общую площадь фигур в массиве.
- Удалять из массива фигуру по индексу;

Фигуры из варианта: Прямоугольник, Трапеция, Ромб.
4. **Идея, метод, алгоритм решения задачи**: Пользователю предлагается выбрать одно из нескольких действий:

1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход

В файле `array.h` реализован массив, который используется для хранения уникальных указателей на фигуры. В файле `figure.h` реализован родительский класс `Figure` с виртуальными методами и операторами:
1. `virtual ~Figure()` - стандартный деструктор.
2. `virtual Point GetCenter() const = 0;` - получение координат центра точки фигуры.
3. `virtual double GetArea() const = 0;` - получение площади фигуры.
4. `virtual void Reset() = 0;` - обнуление фигуры (установление всех вершин в начало координат).
5. `virtual bool operator==(const Figure& other) const = 0;` - оператор сравнения двух фигур.
6. `virtual Figure& operator=(const Figure& other) = 0;` - присваивание копированием.
7. `virtual Figure& operator=(Figure&& other) noexcept = 0;` - присваивание переносом.
8. `friend std::ostream& operator<<(std::ostream& os, const Figure& fig)` - перегрузка оператора вывода в стандартный поток вывода std::cout координат вершин фигуры.
9. `friend std::istream& operator>>(std::istream& is, Figure& fig)` - перегрузка оператора чтения из стандартного потока данных фигур.
10. `virtual void Print(std::ostream& os) const = 0;` - печать фигуры.
11. `operator double() const` - Вычисление площади фигуры через перегрузку оператора приведения к типу `double`.

Далее в файлах `rectangle.h`, `rectangle.cpp`, `rhombus.h`, `rhombus.cpp`, `trapezoid.h`, `trapezoid.cpp` реализованы сами классы `Rectangle`, `Rhombus` и `Trapezoid`, которые наследуются от `Figure` с переопределением методов. 

6. **Протокол**: 
Запуск тестов:
```
moscow@moscow:~/Рабочий стол/OOP_2k/lab3/build$ make test
Running tests...
Test project /home/moscow/Рабочий стол/OOP_2k/lab3/build
    Start 1: lab3_test
1/2 Test #1: lab3_test ........................   Passed    0.00 sec
    Start 2: lab3_test+
2/2 Test #2: lab3_test+ .......................   Passed    0.00 sec

100% tests passed, 0 tests failed out of 2

Total Test time (real) =   0.01 sec
```

Отдельные запуски вручную:
```
moscow@moscow:~/Рабочий стол/OOP_2k/lab3/build$ lab3/OOP_3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 8
Неверный выбор. Пожалуйста, попробуйте снова.

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 2
Список фигур пуст.

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 3
Введите номер фигуры для удаления: 4
terminate called after throwing an instance of 'std::out_of_range'
  what():  Index out of bounds
Аварийный останов (образ памяти сброшен на диск)

moscow@moscow:~/Рабочий стол/OOP_2k/lab3/build$ lab3/OOP_3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 1
0 3 0 0 5 0 5 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 2  
0 0 2 -3 4 0 2 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 3
0 0 5 0 5 3 3 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 2

Информация о фигурах:

Координаты вершин:
Coordinates of the vertices of the rectangle:
(0, 3)
(0, 0)
(5, 0)
(5, 3)

Геометрический центр: (2.5, 1.5)
Площадь: 15

Координаты вершин:
Coordinates of the vertices of the Rhombus:
(0, 0)
(2, -3)
(4, 0)
(2, 3)

Геометрический центр: (2, 0)
Площадь: 12

Координаты вершин:
Coordinates of the vertices of the Trapezoid:
(0, 0)
(5, 0)
(5, 3)
(3, 3)

Геометрический центр: (3.25, 1.5)
Площадь: 10.5

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 4
Список фигур пуст.

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 1
0 3 0 0 5 0 5 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 2

Информация о фигурах:

Координаты вершин:
Coordinates of the vertices of the rectangle:
(0, 3)
(0, 0)
(5, 0)
(5, 3)

Геометрический центр: (2.5, 1.5)
Площадь: 15

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 3
Введите номер фигуры для удаления: 1

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 2
Список фигур пуст.

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 1
0 3 0 0 5 0 5 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 2
0 0 2 -3 4 0 2 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 3
0 0 5 0 5 3 3 3

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 5
Общая лощадь: 37.5

Выберите операцию:
1. Создать фигуру
2. Вывести информацию о всех фигурах
3. Удалить фигуру
4. Удалить все фигуры
5. Посчитать площадь всех фигур в массиве
0. Выход
Ваш выбор: 1
Выберите тип фигуры:
1 - Прямоугольник,
2 - Ромб,
3 - Трапеция
: 1
0 0 5 0 5 3 3 3
terminate called after throwing an instance of 'std::invalid_argument'
  what():  Invalid rectangle coordinates
Аварийный останов (образ памяти сброшен на диск)
```

7. **Замечания автора** по существу работы: -.
8. **Выводы**:  Устала. Просто устала. Скоро я возненавижу реализовывать Array, столько боли, нервов и страданий было на него положено -- он занял у меня больше времени, чем основное задание по наследованию! Бр. Отвратителен. Если же про него не вспоминать, то в целом работа мне понравилась. Я узнала о наследовании в С++, смогла немного оценить его, сравнивая с Python. Пришлось также пораскинуть мозгами и вспомнить школьную математику. Лабораторную работу считаю выполненной.